from difflib import SequenceMatcher
from operator import itemgetter


def similar(a, b):
    return SequenceMatcher(None, a, b).ratio()


def print_all_plates(input):
    for pic in input:
        if (len(pic['results']) > 0):
            i = 0
            # pic["results"] is for every pic, whether there are plates detected
            for p in pic['results']:
                i += 1
                print("Plate #%d" % i)
                print("   %12s %12s" % ("Plate", "Confidence"))
                # number of candidates = top_n
                for candidate in p['candidates']:
                    prefix = "-"
                    plate = candidate["plate"]
                    confidence = candidate["confidence"]
                    print("  %s %12s%12f" % (prefix, candidate['plate'], candidate['confidence']))


def extract_plates(input, debug=False):
    ret = []
    ret_tmp = []
    date_tmp = None
    similar_threshold = 0.5

    # input is result from ALPR
    empty = True

    for pic, date in input:
        #print(pic, date)
        if (len(pic['results']) > 0):
            # pic["results"] is for every pic, whether there are plates detected
            for p in pic['results']:
                # number of candidates = top_n
                for candidate in p['candidates']:
                    plate = candidate["plate"]
                    confidence = candidate["confidence"]
                    # if plate not in ret_tmp, add
                    if len(ret_tmp) == 0:
                        #print("Adding to temp")
                        date_tmp = date
                        ret_tmp = [(plate, confidence, date_tmp)]
                    else:
                        i_continue = True
                        for (pla, conf, dat) in ret_tmp:
                            if i_continue and similar(pla, plate) < similar_threshold:
                                i_continue = False
                        if i_continue:
                            # same car, continue to append
                            ret_tmp.append((plate, confidence, date_tmp))
                        else:
                            # new car, start over
                            # get most confident plate and add to ret
                            # https://stackoverflow.com/questions/3121979/how-to-sort-list-tuple-of-lists-tuples
                            sorted_by_confidence = sorted(ret_tmp, key=itemgetter(1),
                                                          reverse=True)  # sort by confidence
                            #print(sorted_by_confidence)
                            ret.append(sorted_by_confidence[0])
                            date_tmp = date
                            ret_tmp = [(plate, confidence, date_tmp)] # date as append newest car's time
            empty = False
        else:
            # no plates detected
            empty = empty and True

    if not empty:
        # need to copy the last car into ret, otherwise lost
        sorted_by_confidence = sorted(ret_tmp, key=itemgetter(1), reverse=True)  # sort by confidence
        #print(sorted_by_confidence)
        ret.append(sorted_by_confidence[0])
    else:
        #print("No plates detected at all, returning empty list.")
        return []
    #print("rr", ret)
    return ret

# results = [{'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 512.862976, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 470.529999, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 496.385986, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 382.015991, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 427.520996, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 404.895996, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 381.390991, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 449.820007, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 549.916016, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 241.701004, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 34.908001, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497569000, 'version': 2, 'processing_time_ms': 34.488998, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 500.576996, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 411.243011, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 495.919006, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 460.253998, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 498.625, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 531.991028, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 562.697021, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 464.256012, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 496.580994, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 484.300995, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 487.994995, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 432.604004, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 506.346008, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 401.355011, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 394.653015, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 365.868988, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 426.210999, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 407.667999, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 394.34201, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 368.93399, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 414, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 401.898987, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 418.082001, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 397.834015, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 499.959015, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 498.479004, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 510.78299, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 445.463013, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 604.728027, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 487.092987, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 502.980988, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 457.225006, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497559000, 'version': 2, 'processing_time_ms': 488.960999, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 479.045013, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497560000, 'version': 2, 'processing_time_ms': 494.503998, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 454.194, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 363.945007, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 393.140991, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 416.03299, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 460.057007, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 518.5, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 473.983002, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 553.075012, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 467.339996, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497561000, 'version': 2, 'processing_time_ms': 565.781982, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 541.992004, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 558.453979, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 556.859985, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 577.281982, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 444.681, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 619.442993, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 449.919006, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 445.273987, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 398.777008, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 480.229004, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 406.493988, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 391.321014, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 391.731995, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 474.048004, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 464.880005, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 468.377991, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 465.112, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 463.877014, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 510.175995, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 448.967987, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 473.832001, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 453.165009, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 444.609985, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 462.046997, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 464.609985, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 459.687012, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 526.541992, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 478.688995, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 525.411987, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 463.740997, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 453.036987, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 408.839996, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497562000, 'version': 2, 'processing_time_ms': 373.06601, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 364.768005, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497563000, 'version': 2, 'processing_time_ms': 423.937012, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 371.22699, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 367.528015, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 375.643005, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 377.476013, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 365.184998, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 437.743011, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 363.166992, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 445.095001, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 440.355988, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 363.927002, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 379.812988, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 474.5, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 528.546021, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 605.330994, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 587.012024, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 556.789001, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 557.330994, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 653.567993, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 693.677979, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 624.109009, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 632.16803, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 629.093994, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 611.315979, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 563.276978, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 472.709015, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 486.097992, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 456.419006, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 450.877991, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 456.52301, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 445.612, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 492.779999, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 462.519012, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 474.195007, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 447.540009, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 479.002991, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 467.789001, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 466.471985, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 479.367004, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 517.567017, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 476.253998, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497564000, 'version': 2, 'processing_time_ms': 535.833984, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497565000, 'version': 2, 'processing_time_ms': 530.700989, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 556.958984, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 629.538025, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 494.27301, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 630.109985, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 408.479004, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 399.300995, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 470.015015, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 425.509003, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 372.714996, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 376.084991, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497566000, 'version': 2, 'processing_time_ms': 447.40799, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 347.781006, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 353.571014, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 377.191986, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 463.317993, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 404.417999, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 403.179993, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 212.666, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 416.634003, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 384.325012, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 413.106995, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 218.156998, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 484.009003, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 466.204987, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 369.78299, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 206.072006, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 484.928986, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 467.489014, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 303.234009, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 201.970001, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 409.890991, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 369.826996, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 322.024994, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 168.694, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 314.088013, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497567000, 'version': 2, 'processing_time_ms': 310.708008, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}, {'epoch_time': 1496497568000, 'version': 2, 'processing_time_ms': 290.588013, 'data_type': 'alpr_results', 'regions_of_interest': [], 'img_width': 1280, 'img_height': 720, 'results': []}]
#
# print_all_plates(results)
# ret = extract_plates(results, True)
# print(ret)
